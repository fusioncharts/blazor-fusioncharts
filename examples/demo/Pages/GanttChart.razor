@page "/GanttChart"

<h1>Gantt Chart</h1>


<div id="Gantt Chart"></div>

@inject FusionChartsService fusionChartsService;

@code {


    public async void GanttCharts()
    {
        //chart code
        dynamic myChartConfig = new System.Dynamic.ExpandoObject();
        dynamic myDataSource = new System.Dynamic.ExpandoObject();
        dynamic myChart = new System.Dynamic.ExpandoObject();

        dynamic myEvent = new System.Dynamic.ExpandoObject();

        myEvent.connectorRollOut = "function() { console.log('connectorRollOut successfull')}";
        //myEvent.processClick = "function() { console.log('processClick')}";
        //myEvent.processRollOver = "function() { console.log('processRollOver ')}";
        //myEvent.processRollOut = "function() { console.log('processRollOut')}";
        //myEvent.categoryClick = "function() { console.log('categoryClick')}";
        //myEvent.categoryRollOver = "function() { console.log('categoryRollOver')}";
        //myEvent.categoryRollOut = "function() { console.log('categoryRollOut')}";
        //myEvent.milestoneClick = "function() { console.log('milestoneClick')}";
        //myEvent.milestoneRollOver = "function() { console.log('milestoneRollOver')}";
        //myEvent.milestoneRollOut = "function() { console.log('milestoneRollOut')}";
        //myEvent.connectorClick = "function() { console.log('connectorClick')}";
        //myEvent.connectorRollOver = "function() { console.log('connectorRollOver')}";
        //myEvent.connectorRollOut = "function() { console.log('connectorRollOut')}";


        myChartConfig.id = "ganttChart";
        myChartConfig.type = "gantt";
        myChartConfig.width = 600;
        myChartConfig.height = 400;
        myChartConfig.dataFormat = "json";
        myChartConfig.renderAt = "Gantt Chart";

        myDataSource.chart = myChart;
        myChartConfig.events = myEvent;
        myChartConfig.dataSource = myDataSource;

        String chartConfig = System.Text.Json.JsonSerializer.Serialize(myChartConfig);
        await fusionChartsService.renderChart(chartConfig);


        await fusionChartsService.CallFusionChartsFunction(
                   "setChartData", "ganttChart", @"
{
     ""chart"": {
        ""theme"": ""fusion"",
        ""dateformat"": ""mm/dd/yyyy"",
        ""caption"": ""Social Media Optimization"",
        ""subcaption"": ""Project Plan"",
        ""chartbottomMargin"": ""90"",
        ""showLabel"": ""0""
      },
      ""categories"": [{
        ""category"": [{
            ""start"": ""08/01/2014"",
            ""end"": ""08/31/2014"",
            ""label"": ""Aug '14""
          },
          {
            ""start"": ""09/01/2014"",
            ""end"": ""09/30/2014"",
            ""label"": ""Sep '14""
          },
          {
            ""start"": ""10/01/2014"",
            ""end"": ""10/31/2014"",
            ""label"": ""Oct '14""
          },
          {
            ""start"": ""11/01/2014"",
            ""end"": ""11/30/2014"",
            ""label"": ""Nov '14""
          },
          {
            ""start"": ""12/01/2014"",
            ""end"": ""12/31/2014"",
            ""label"": ""Dec '14""
          },
          {
            ""start"": ""01/01/2015"",
            ""end"": ""01/31/2015"",
            ""label"": ""Jan '15""
          },
          {
            ""start"": ""02/01/2015"",
            ""end"": ""02/28/2015"",
            ""label"": ""Feb '15""
          },
          {
            ""start"": ""03/01/2015"",
            ""end"": ""03/31/2015"",
            ""label"": ""Mar '15""
          }
        ]
      }],
      ""processes"": {
        ""fontsize"": ""12"",
        ""isbold"": ""1"",
        ""align"": ""left"",
        ""process"": [{
            ""id"": ""PROCESS_1"",
            ""label"": ""Identify Customers""
          },
          {
            ""id"": ""PROCESS_2"",
            ""label"": ""Survey 500 Customers""
          },
          {
            ""id"": ""PROCESS_3"",
            ""label"": ""Interpret Requirements""
          },
          {
            ""id"": ""PROCESS_4"",
            ""label"": ""Market Analysis""
          },
          {
            ""id"": ""PROCESS_5"",
            ""label"": ""Brainstorm concepts""
          },
          {
            ""id"": ""PROCESS_6"",
            ""label"": ""Define Ad Requirements""
          },
          {
            ""id"": ""PROCESS_7"",
            ""label"": ""Design And Develop""
          },
          {
            ""id"": ""PROCESS_8"",
            ""label"": ""Mock test""
          },
          {
            ""id"": ""PROCESS_9"",
            ""label"": ""Documentation""
          },
          {
            ""id"": ""PROCESS_10"",
            ""label"": ""Start Campaign""
          }
        ]
      },
      ""tasks"": {
        ""task"": [{
            ""id"": ""1"",
            ""start"": ""08/04/2014"",
            ""end"": ""08/10/2014"",
            ""label"": ""test""
          },
          {
            ""id"": ""2"",
            ""start"": ""08/08/2014"",
            ""end"": ""08/19/2014""
          },
          {
            ""id"": ""3"",
            ""start"": ""08/19/2014"",
            ""end"": ""09/02/2014""
          },
          {
            ""id"": ""4"",
            ""start"": ""08/24/2014"",
            ""end"": ""09/02/2014""
          },
          {
            ""id"": ""5"",
            ""start"": ""09/02/2014"",
            ""end"": ""09/21/2014""
          },
          {
            ""id"": ""6"",
            ""start"": ""09/21/2014"",
            ""end"": ""10/06/2014""
          },
          {
            ""id"": ""7"",
            ""start"": ""10/06/2014"",
            ""end"": ""01/21/2015""
          },
          {
            ""id"": ""8"",
            ""start"": ""01/21/2015"",
            ""end"": ""02/19/2015""
          },
          {
            ""id"": ""9"",
            ""start"": ""01/28/2015"",
            ""end"": ""02/24/2015""
          },
          {
            ""id"": ""10"",
            ""start"": ""02/24/2015"",
            ""end"": ""03/27/2015""
          }
        ]
      },
      ""connectors"": [{
        ""connector"": [

          {
            ""fromtaskid"": ""2"",
            ""totaskid"": ""3"",
            ""color"": ""#008ee4"",
            ""thickness"": ""2""
          },
          {
            ""fromtaskid"": ""4"",
            ""totaskid"": ""5"",
            ""color"": ""#008ee4"",
            ""thickness"": ""2""
          },
          {
            ""fromtaskid"": ""5"",
            ""totaskid"": ""6"",
            ""color"": ""#008ee4"",
            ""thickness"": ""2""
          },
          {
            ""fromtaskid"": ""6"",
            ""totaskid"": ""7"",
            ""color"": ""#008ee4"",
            ""thickness"": ""2""
          },
          {
            ""fromtaskid"": ""7"",
            ""totaskid"": ""8"",
            ""color"": ""#008ee4"",
            ""thickness"": ""2""
          },
          {
            ""fromtaskid"": ""9"",
            ""totaskid"": ""10"",
            ""color"": ""#008ee4"",
            ""thickness"": ""2""
          }
        ]
      }],
      ""milestones"": {
        ""milestone"": [{
            ""date"": ""3/28/2015"",
            ""taskid"": ""10"",
            ""color"": ""#f8bd19"",
            ""shape"": ""star"",
            ""tooltext"": ""Completion of First Campaign""
          }

        ]
      },
      ""annotations"": {
        ""origw"": ""750"",
        ""origh"": ""550"",
        ""autoscale"": ""1"",
        ""groups"": [{
          ""id"": ""info"",
          ""items"": [{
              ""id"": ""infoBg"",
              ""type"": ""rectangle"",
              ""x"": ""$canvasCenterX-140"",
              ""y"": ""$chartEndY-15"",
              ""tox"": ""$canvasCenterX +140"",
              ""toy"": ""$chartEndY-90"",
              ""fillcolor"": ""#CCCCCC""
            },
            {
              ""id"": ""infoText"",
              ""type"": ""Text"",
              ""fontSize"": ""11"",
              ""fillcolor"": ""#333333"",
              ""isHTML"": ""1"",
              ""text"": ""Click on Task to get Details"",
              ""x"": ""$chartCenterX"",
              ""y"": ""$chartEndY-53""
            }
          ]
        }]
      }
}", "json");





    }
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            GanttCharts();
        }
        else
        {

        }
    }



}
